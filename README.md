# Deepcool 冰域系列 linux python脚本

## _1.缘起_

作者前段时间配了台pc,使用了Deepcool（九州风神）的冰域系列240数显水冷。由于作者的主系统是arch linux, 发现Deepcool官方并没有对linux系统有支持数显软件，且截至本文撰写时（25.11.22），没有任何开源社区项目对冰域系列做出适配，遂作者稍微做了点逆向工程，使其LCD屏幕能在linux环境下显示cpu参数 

## _2.功能和细节_

### _功能_

本项目作者只用了几个小时开发，非常随意，代码大量使用了ai，所以可能存在不恰当之处。但在作者一段时间的使用中，该插件的明显问题均已被修复，应该拥有不错的稳定性。本项目暂时没有发行版（作者比较懒），通过在系统环境或者虚拟环境下运行`sudo python main.py`（如果在系统环境下运行，需要安装 `sudo pacman -S python-pyusb python-psutil python-pillow`）可以实现水冷屏幕的5Hz频率更新CPU温度，功耗，占用等信息，具体效果见文末附图。

### _细节_

作者通过在windows下抓包获得了该款水冷在图片模式下的帧通信格式（wireshark抓包文件已经附在仓库中，从设备4.5.1），作者发现windows下的上位机通过定时向下位机发送一个有效载荷为153600字节的帧更新水冷LCD的显示，该图片帧没有任何校验，采用RGB565格式发送LCD的显示内容。

除此之外，还有_1._`aa04000603640027b9`_2._`aa0100092991`_3._`aa08000001005802002c01bc11` 三个有效帧。在开始通信时，上位机顺次发送1 2 帧，之后开始发送图片帧。每次发送图片帧之前，会先发送 3。作者除了看出0xaa 为帧头，后两位为Payload长度以外并未对帧内容进行逆向，不过显然可以发现冰域系列水冷的帧格式和其他产品有显著不同。

该程序实现了printf，drawline，drawcircle等多个方法，使得用户可以之间在屏幕上画图，该项目实现了基本的cpu参数获取和UI界面绘制，基本实现了windows下deepcool软件的数据显示功能。

## _3.缺点_

作者并没有做该款水冷的非图片模式的逆向，理论上来说非图片模式能实现windows下视觉效果完全一样的系统参数显示并极大减少单帧长度，但作者个人认为图片模式有更高的自由度允许开发者显示稀奇古怪的东西。除此之外，本项目没有发行版且完全没有前端，程序内容为冰域系列高度定制，完全不能为Deepcool的其他产品使用。额外的，GIF和图片显示功能暂时没有更新，未来作者闲的时候可能会做。

## _4.附图_



<img src="./Rendering.png" alt="实物图" width="400" height="300">





